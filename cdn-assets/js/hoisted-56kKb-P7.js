import"./hoisted-DKOxBC1d.js";function e(){const e=document.querySelector(".reading-progress-text"),t=document.querySelector(".progress-text");if(!e||!t)return;const n=document.querySelector("article");function o(){const o=n.getBoundingClientRect(),i=n.offsetHeight,l=window.innerHeight,a=Math.max(0,-o.top);Math.min(i,l-Math.max(0,o.top));const s=Math.min(100,Math.max(0,a/(i-l)*100));s>5?(e.style.display="flex",t.textContent=`${Math.round(s)}% complete`):e.style.display="none"}n&&(window.addEventListener("scroll",o),window.addEventListener("resize",o),o())}function t(){const e=document.getElementById("reading-progress-bar");if(!e)return;const t=document.querySelector("article");if(!t)return;function n(){t.getBoundingClientRect();const n=t.offsetHeight,o=window.innerHeight,i=window.pageYOffset||document.documentElement.scrollTop,l=t.offsetTop,a=Math.max(0,i-l),s=Math.max(0,n-o),r=Math.min(100,Math.max(0,a/s*100));e.style.width=`${r}%`,e.style.opacity=i>100?"1":"0"}let o=!1;function i(){o||(requestAnimationFrame(()=>{n(),o=!1}),o=!0)}window.addEventListener("scroll",i),window.addEventListener("resize",i),n()}function n(){const e=window.location.pathname;if(JSON.parse(localStorage.getItem("bookmarks")||"[]").some(t=>t.url===e)){const e=document.getElementById("bookmark-btn"),t=e.querySelector(".bookmark-icon"),n=e.querySelector(".bookmark-text");t.setAttribute("fill","currentColor"),n.textContent="Bookmarked",e.classList.remove("bg-gray-100","text-gray-700"),e.classList.add("bg-yellow-100","text-yellow-700")}if(JSON.parse(localStorage.getItem("articleRatings")||"{}")[e]){const e=document.querySelectorAll(".rating-btn"),t=document.querySelector(".rating-thanks");e.forEach(e=>{e.disabled=!0,e.classList.add("opacity-50","cursor-not-allowed")}),t.classList.remove("hidden")}const t=JSON.parse(localStorage.getItem("allRatings")||"{}");t[e]&&(document.querySelector('[data-rating="positive"] .rating-count').textContent=t[e].positive||0,document.querySelector('[data-rating="negative"] .rating-count').textContent=t[e].negative||0)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.toggleExpand=function(e){const t=e.dataset.target,n=document.getElementById(t).querySelector(".hidden-items"),o=e.querySelector(".expand-icon"),i=e.querySelector(".expand-text");if("none"===n.style.display)n.style.display="block",o.style.transform="rotate(180deg)",i.textContent="Show less";else{n.style.display="none",o.style.transform="rotate(0deg)";const t=e.closest('[class*="bg-"]').querySelectorAll("li").length,l=t-n.querySelectorAll("li").length;i.textContent=`Show ${t-l} more`}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),window.submitRating=function(e){const t=e.dataset.rating,n=e.querySelector(".rating-count"),o=parseInt(n.textContent),i=e.closest(".space-y-4").querySelector(".rating-thanks"),l=e.closest(".space-y-4").querySelector(".feedback-form");n.textContent=o+1,i.classList.remove("hidden"),e.closest(".space-y-4").querySelectorAll(".rating-btn").forEach(e=>{e.disabled=!0,e.classList.add("opacity-50","cursor-not-allowed")}),"negative"===t&&setTimeout(()=>{l.style.display="block"},1e3);const a=window.location.pathname,s=JSON.parse(localStorage.getItem("articleRatings")||"{}");s[a]={rating:t,timestamp:Date.now()},localStorage.setItem("articleRatings",JSON.stringify(s))},window.submitFeedback=function(e){e.preventDefault();const t=e.target,n=t.querySelector("textarea").value.trim();console.log("Feedback submitted:",n),t.closest(".feedback-form").innerHTML='\n      <div class="text-center py-4">\n        <div class="text-green-600 dark:text-green-400 text-2xl mb-2">âœ“</div>\n        <p class="text-green-800 dark:text-green-200 font-medium">Thank you for your feedback!</p>\n        <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">We\'ll use it to improve our content.</p>\n      </div>\n    '},window.hideFeedbackForm=function(){document.querySelector(".feedback-form").style.display="none"},window.toggleBookmark=function(){const e=document.getElementById("bookmark-btn"),t=e.querySelector(".bookmark-icon"),n=e.querySelector(".bookmark-text"),o=window.location.pathname,i=document.title;let l=JSON.parse(localStorage.getItem("bookmarks")||"[]");l.some(e=>e.url===o)?(l=l.filter(e=>e.url!==o),t.setAttribute("fill","none"),n.textContent="Bookmark",e.classList.remove("bg-yellow-100","text-yellow-700"),e.classList.add("bg-gray-100","text-gray-700")):(l.push({url:o,title:i,timestamp:Date.now()}),t.setAttribute("fill","currentColor"),n.textContent="Bookmarked",e.classList.remove("bg-gray-100","text-gray-700"),e.classList.add("bg-yellow-100","text-yellow-700")),localStorage.setItem("bookmarks",JSON.stringify(l))},window.copyArticleLink=function(){const e=document.getElementById("copy-link-btn"),t=e.innerHTML;navigator.clipboard.writeText(window.location.href).then(()=>{e.innerHTML='\n        <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>\n        </svg>\n        <span>Copied!</span>\n      ',setTimeout(()=>{e.innerHTML=t},2e3)})},console.log("InteractiveElements: Functions exported to global scope");let o="",i=null,l=[];function a(){!function(){const e=window.location.pathname,t=JSON.parse(localStorage.getItem("textHighlights")||"{}");l=t[e]||[]}(),l.length>0&&(h(),y()),document.addEventListener("mouseup",s),document.addEventListener("keyup",s),document.addEventListener("keydown",e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"h":e.preventDefault(),i&&o&&(c(i,o),r(),window.getSelection().removeAllRanges());break;case"k":e.preventDefault(),m()}"Escape"===e.key&&(r(),document.getElementById("highlights-sidebar").classList.contains("translate-x-full")||m())})}function s(){const e=window.getSelection();document.getElementById("text-selection-toolbar"),e.toString().trim().length>0?(o=e.toString().trim(),i=e.getRangeAt(0).cloneRange(),function(e){const t=document.getElementById("text-selection-toolbar"),n=e.getRangeAt(0).getBoundingClientRect(),o=t.getBoundingClientRect(),i=Math.max(10,n.left+n.width/2-o.width/2),l=n.top-o.height-10;t.style.left=`${i}px`,t.style.top=`${window.scrollY+l}px`,t.style.opacity="1",t.style.pointerEvents="auto",t.style.transform="translateY(0)"}(e)):r()}function r(){const e=document.getElementById("text-selection-toolbar");e.style.opacity="0",e.style.pointerEvents="none",e.style.transform="translateY(-10px)"}function c(e,t){const n="highlight-"+Date.now(),o=document.createElement("span");o.id=n,o.className="bg-yellow-200 dark:bg-yellow-800 px-1 rounded cursor-pointer relative",o.title="Click to remove highlight";try{e.surroundContents(o);const i={id:n,text:t,timestamp:Date.now(),url:window.location.pathname,position:g(o)};l.push(i),u(),y(),h(),o.addEventListener("click",()=>d(n)),p("Text highlighted!")}catch(i){console.error("Could not create highlight:",i),p("Could not highlight this text")}}function d(e){const t=document.getElementById(e);if(t){const e=t.parentNode;e.replaceChild(document.createTextNode(t.textContent),t),e.normalize()}l=l.filter(t=>t.id!==e),u(),y(),0===l.length&&(document.getElementById("highlights-toggle").style.display="none"),p("Highlight removed")}function g(e){const t=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);let n,o=0;for(;n=t.nextNode();){if(e.contains(n))return o;o+=n.textContent.length}return o}function u(){const e=window.location.pathname,t=JSON.parse(localStorage.getItem("textHighlights")||"{}");t[e]=l,localStorage.setItem("textHighlights",JSON.stringify(t))}function m(){const e=document.getElementById("highlights-sidebar"),t=document.getElementById("highlights-overlay");!e.classList.contains("translate-x-full")?(e.classList.add("translate-x-full"),t.classList.add("opacity-0","pointer-events-none")):(e.classList.remove("translate-x-full"),t.classList.remove("opacity-0","pointer-events-none"))}function y(){const e=document.getElementById("highlights-list"),t=document.getElementById("no-highlights");if(0===l.length)return e.innerHTML="",void(t.style.display="block");t.style.display="none",e.innerHTML=l.map((e,t)=>`\n      <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-3 group">\n        <div class="flex items-start justify-between mb-2">\n          <span class="text-xs text-gray-500 dark:text-gray-400">\n            Highlight ${t+1}\n          </span>\n          <button\n            onclick="removeHighlight('${e.id}')"\n            class="opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-all"\n            title="Remove highlight"\n          >\n            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>\n            </svg>\n          </button>\n        </div>\n        <p class="text-sm text-gray-800 dark:text-gray-200 leading-relaxed">\n          "${e.text.length>150?e.text.substring(0,150)+"...":e.text}"\n        </p>\n        <div class="mt-2 text-xs text-gray-500 dark:text-gray-400">\n          ${new Date(e.timestamp).toLocaleDateString()}\n        </div>\n      </div>\n    `).join("")}function h(){document.getElementById("highlights-toggle").style.display="block"}function p(e){const t=document.createElement("div");t.className="fixed top-4 right-4 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="0",t.style.transform="translateY(-10px)",setTimeout(()=>document.body.removeChild(t),300)},2e3)}document.getElementById("copy-selected-text")?.addEventListener("click",()=>{o&&navigator.clipboard.writeText(o).then(()=>{p("Text copied to clipboard!"),r()})}),document.getElementById("highlight-selected-text")?.addEventListener("click",()=>{i&&o&&(c(i,o),r(),window.getSelection().removeAllRanges())}),document.getElementById("share-selected-text")?.addEventListener("click",()=>{if(o){const e=window.location.href,t=`"${o}" - ${document.title} ${e}`;navigator.share?navigator.share({title:document.title,text:t}):navigator.clipboard.writeText(t).then(()=>{p("Quote copied for sharing!")}),r()}}),document.getElementById("close-toolbar")?.addEventListener("click",()=>{r(),window.getSelection().removeAllRanges()}),window.toggleHighlightsSidebar=m,window.removeHighlight=d,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a();let f=0,w=0,x=100;function v(){let e;!function(){const e=document.getElementById("mobile-progress-circle"),t=document.getElementById("mobile-progress-path"),n=document.getElementById("mobile-progress-text");if(!e||!t||!n)return;function o(){const o=document.querySelector("article");if(!o)return;const i=o.getBoundingClientRect(),l=o.offsetHeight,a=window.innerHeight,s=Math.max(0,-i.top),r=Math.max(0,l-a),c=Math.min(100,Math.max(0,s/r*100)),d=125.66,g=d-c/100*d;t.style.strokeDashoffset=g.toString(),n.textContent=Math.round(c)+"%",window.scrollY>100?e.style.display="block":e.style.display="none"}let i=!1;window.addEventListener("scroll",()=>{i||(requestAnimationFrame(()=>{o(),i=!1}),i=!0)})}(),document.addEventListener("touchstart",b,{passive:!0}),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",S,{passive:!0}),function(){const e=document.getElementById("mobile-toc-content"),t=document.getElementById("mobile-toc-toggle");if(console.log("MobileTOC: Setting up mobile TOC"),console.log("MobileTOC: Content element found:",!!e),console.log("MobileTOC: Toggle button found:",!!t),!e||!t)return void console.log("MobileTOC: Missing required elements");let n=document.querySelectorAll("article h2[id], article h3[id], article h4[id], main h2[id], main h3[id], main h4[id]");if(console.log("MobileTOC: Found headings with article/main:",n.length),0===n.length){const e=document.querySelectorAll("h2[id], h3[id], h4[id]");if(console.log("MobileTOC: Alternative headings found:",e.length),0===e.length)return void console.log("MobileTOC: No headings found at all");n=e}let o='<ul class="space-y-2">';Array.from(n).forEach(e=>{const t=parseInt(e.tagName.charAt(1))>2?"ml-4":"",n=e.id,i=e.textContent.trim();o+=`\n        <li class="${t}">\n          <a href="#${n}" class="block py-1 px-2 text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded transition-colors">\n            ${i}\n          </a>\n        </li>\n      `}),o+="</ul>",e.innerHTML=o,t.style.display="flex",console.log("MobileTOC: TOC generated successfully, button should now be visible");e.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{L()})})}(),function(){const e=localStorage.getItem("articleFontSize");if(e){x=parseInt(e);const t=document.querySelector("article");t&&(t.style.fontSize=`${x}%`)}}(),window.addEventListener("scroll",()=>{!function(){const e=document.getElementById("mobile-progress-circle"),t=document.getElementById("mobile-toc-toggle");window.scrollY>100&&(e&&(e.style.display="block"),t&&(t.style.display="flex"))}(),clearTimeout(e),e=setTimeout(()=>{},3e3)})}function b(e){f=e.touches[0].clientX,w=e.touches[0].clientY}function k(e){if(!f||!w)return;const t=e.touches[0].clientX,n=e.touches[0].clientY,o=f-t,i=w-n;if(Math.abs(o)>Math.abs(i)){const e=50;Math.abs(o)>e&&E(o>0?"next":"prev")}}function S(e){if(!f||!w)return;const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,o=f-t,i=w-n;f=0,w=0,["prev","next"].forEach(e=>{const t=document.getElementById(`swipe-${e}-hint`);t&&(t.style.transform="prev"===e?"translateX(-100%)":"translateX(100%)",setTimeout(()=>{t.style.display="none"},300))}),Math.abs(o)>Math.abs(i)&&Math.abs(o)>100&&(o>0?(console.log("Navigate to next article"),M("Swipe navigation: Next article")):(console.log("Navigate to previous article"),M("Swipe navigation: Previous article")))}function E(e){const t=document.getElementById(`swipe-${e}-hint`);t&&(t.style.display="block",setTimeout(()=>{t.style.transform="translateX(0)"},10))}function L(){const e=document.getElementById("mobile-toc-overlay"),t=document.getElementById("mobile-toc-drawer");!t.classList.contains("translate-y-full")?(t.classList.add("translate-y-full"),e.classList.add("opacity-0","pointer-events-none")):(t.classList.remove("translate-y-full"),e.classList.remove("opacity-0","pointer-events-none"))}function C(){const e=document.getElementById("fab-menu-items"),t=document.getElementById("fab-toggle").querySelector(".fab-icon");!e.classList.contains("opacity-0")?(e.classList.add("opacity-0","pointer-events-none"),e.querySelectorAll("button").forEach((e,t)=>{setTimeout(()=>{e.classList.add("scale-0")},50*t)}),t.style.transform="rotate(0deg)"):(e.classList.remove("opacity-0","pointer-events-none"),e.querySelectorAll("button").forEach((e,t)=>{setTimeout(()=>{e.classList.remove("scale-0")},50*t)}),t.style.transform="rotate(45deg)")}function M(e){const t=document.createElement("div");t.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="0",t.style.transform="translateX(-50%) translateY(-10px)",setTimeout(()=>document.body.removeChild(t),300)},2e3)}window.toggleMobileTOC=L,window.toggleFABMenu=C,window.triggerMobileShare=function(){const e=document.title,t=window.location.href;navigator.share?navigator.share({title:e,url:t}):navigator.clipboard.writeText(t).then(()=>{M("Link copied for sharing!")}),C()},window.triggerBookmark=function(){window.toggleBookmark&&window.toggleBookmark(),C()},window.toggleFontSizeMenu=function(){const e=document.getElementById("font-size-controls");!e.classList.contains("opacity-0")?e.classList.add("opacity-0","pointer-events-none"):e.classList.remove("opacity-0","pointer-events-none"),C()},window.adjustFontSize=function(e){const t=document.querySelector("article");t&&("increase"===e?x=Math.min(150,x+10):"decrease"===e&&(x=Math.max(80,x-10)),t.style.fontSize=`${x}%`,localStorage.setItem("articleFontSize",x.toString()),M(`Font size: ${x}%`))},window.resetFontSize=function(){x=100;const e=document.querySelector("article");e&&(e.style.fontSize="100%"),localStorage.removeItem("articleFontSize"),M("Font size reset")},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",v):v();
