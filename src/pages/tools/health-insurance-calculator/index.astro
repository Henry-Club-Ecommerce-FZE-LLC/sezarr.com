---
import BaseLayout from '../../../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Health Insurance Cost Calculator - Calculate Your Premiums"
  description="Calculate your health insurance costs with our free calculator. Compare plans, deductibles, and find affordable coverage options."
>
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Health Insurance Calculator</h1>
    
    <div class="mb-8">
      <p class="text-lg mb-4">
        Calculate estimated health insurance costs based on your age, location, and coverage preferences.
      </p>
    </div>

    <div class="calculator-container bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
      <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100">
        Health Insurance Cost Calculator
      </h2>
      
      <form id="healthInsuranceCalculator" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium mb-2">Age</label>
            <input type="number" id="age" min="18" max="100" class="w-full p-3 border rounded-lg" required>
          </div>
          
          <div>
            <label class="block text-sm font-medium mb-2">State</label>
            <select id="state" class="w-full p-3 border rounded-lg" required>
              <option value="">Select State</option>
              <option value="CA">California</option>
              <option value="FL">Florida</option>
              <option value="TX">Texas</option>
              <option value="NY">New York</option>
              <option value="other">Other</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium mb-2">Income Level</label>
            <select id="income" class="w-full p-3 border rounded-lg" required>
              <option value="">Select Income Range</option>
              <option value="low">Under $25,000</option>
              <option value="medium">$25,000 - $50,000</option>
              <option value="high">$50,000 - $100,000</option>
              <option value="very-high">Over $100,000</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium mb-2">Plan Type</label>
            <select id="planType" class="w-full p-3 border rounded-lg" required>
              <option value="">Select Plan Type</option>
              <option value="bronze">Bronze Plan</option>
              <option value="silver">Silver Plan</option>
              <option value="gold">Gold Plan</option>
              <option value="platinum">Platinum Plan</option>
            </select>
          </div>
        </div>
        
        <button type="submit" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700">
          Calculate Health Insurance Cost
        </button>
      </form>
      
      <div id="results" class="mt-8 hidden">
        <h3 class="text-xl font-semibold mb-4">Estimated Monthly Premium</h3>
        <div class="bg-blue-50 dark:bg-blue-900 p-4 rounded-lg">
          <div class="text-3xl font-bold text-blue-600 dark:text-blue-400" id="monthlyPremium">$0</div>
          <div class="text-sm text-gray-600 dark:text-gray-400" id="annualPremium">$0 annually</div>
        </div>
        
        <div class="mt-4 text-sm text-gray-600 dark:text-gray-400">
          <p>* Estimates based on average market rates. Actual costs may vary based on specific plans and subsidies.</p>
          <p>* Consider deductibles, co-pays, and out-of-pocket maximums when comparing plans.</p>
        </div>
      </div>
    </div>

    <div class="mt-12">
      <h2 class="text-2xl font-bold mb-6">Understanding Health Insurance Costs</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h3 class="text-xl font-semibold mb-4">Factors Affecting Premiums</h3>
          <ul class="space-y-2 text-gray-600 dark:text-gray-400">
            <li>• Age and gender</li>
            <li>• Geographic location</li>
            <li>• Plan type and metal tier</li>
            <li>• Tobacco use</li>
            <li>• Income level (for subsidies)</li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-xl font-semibold mb-4">Ways to Save Money</h3>
          <ul class="space-y-2 text-gray-600 dark:text-gray-400">
            <li>• Premium tax credits</li>
            <li>• Cost-sharing reductions</li>
            <li>• High-deductible health plans</li>
            <li>• Health Savings Accounts</li>
            <li>• Employer-sponsored plans</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('healthInsuranceCalculator').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const age = parseInt(document.getElementById('age').value);
      const state = document.getElementById('state').value;
      const income = document.getElementById('income').value;
      const planType = document.getElementById('planType').value;
      
      if (!age || !state || !income || !planType) {
        alert('Please fill in all fields');
        return;
      }
      
      let basePremium = 300; // Base monthly premium
      
      // Age factor
      if (age < 30) basePremium *= 0.8;
      else if (age < 40) basePremium *= 1.0;
      else if (age < 50) basePremium *= 1.3;
      else if (age < 60) basePremium *= 1.8;
      else basePremium *= 2.5;
      
      // Plan type factor
      const planFactors = {
        'bronze': 0.7,
        'silver': 1.0,
        'gold': 1.3,
        'platinum': 1.6
      };
      basePremium *= planFactors[planType];
      
      // State factor
      const stateFactors = {
        'CA': 1.2,
        'FL': 0.9,
        'TX': 0.8,
        'NY': 1.4,
        'other': 1.0
      };
      basePremium *= stateFactors[state];
      
      // Income-based subsidy estimate
      const incomeFactors = {
        'low': 0.2,
        'medium': 0.6,
        'high': 0.9,
        'very-high': 1.0
      };
      basePremium *= incomeFactors[income];
      
      const monthlyPremium = Math.round(basePremium);
      const annualPremium = monthlyPremium * 12;
      
      document.getElementById('monthlyPremium').textContent = `$${monthlyPremium}`;
      document.getElementById('annualPremium').textContent = `$${annualPremium.toLocaleString()} annually`;
      document.getElementById('results').classList.remove('hidden');
      
      // Scroll to results
      document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
    });
  </script>
</BaseLayout>