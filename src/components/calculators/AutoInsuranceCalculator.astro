---
// Auto Insurance Cost Calculator Component
---

<div class="calculator-container bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
  <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100">
    Auto Insurance Cost Calculator
  </h2>
  
  <form id="autoInsuranceCalculator" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium mb-2">Age</label>
        <input type="number" id="age" min="16" max="100" class="w-full p-3 border rounded-lg" required>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Gender</label>
        <select id="gender" class="w-full p-3 border rounded-lg" required>
          <option value="">Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Marital Status</label>
        <select id="maritalStatus" class="w-full p-3 border rounded-lg" required>
          <option value="">Select Status</option>
          <option value="single">Single</option>
          <option value="married">Married</option>
          <option value="divorced">Divorced</option>
          <option value="widowed">Widowed</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Vehicle Year</label>
        <input type="number" id="vehicleYear" min="1990" max="2025" class="w-full p-3 border rounded-lg" required>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Credit Score Range</label>
        <select id="creditScore" class="w-full p-3 border rounded-lg" required>
          <option value="">Select Range</option>
          <option value="excellent">Excellent (750+)</option>
          <option value="good">Good (700-749)</option>
          <option value="fair">Fair (650-699)</option>
          <option value="poor">Poor (Below 650)</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium mb-2">Driving Record</label>
        <select id="drivingRecord" class="w-full p-3 border rounded-lg" required>
          <option value="">Select Record</option>
          <option value="clean">Clean (No violations)</option>
          <option value="minor">Minor violations</option>
          <option value="major">Major violations</option>
          <option value="dui">DUI/DWI</option>
        </select>
      </div>
    </div>
    
    <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors">
      Calculate Insurance Cost
    </button>
  </form>
  
  <div id="calculatorResults" class="mt-6 hidden">
    <h3 class="text-xl font-semibold mb-4">Estimated Annual Premium</h3>
    <div class="bg-blue-50 dark:bg-blue-900 p-4 rounded-lg">
      <div class="text-3xl font-bold text-blue-600 dark:text-blue-400" id="premiumEstimate">$0</div>
      <div class="text-sm text-gray-600 dark:text-gray-300 mt-2">
        This is an estimate based on national averages. Actual rates may vary significantly.
      </div>
    </div>
    
    <div class="mt-4 text-sm text-gray-600 dark:text-gray-300">
      <p><strong>Factors affecting your rate:</strong></p>
      <ul id="rateFactors" class="list-disc list-inside mt-2"></ul>
    </div>
  </div>
</div>

<script>
document.getElementById('autoInsuranceCalculator').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Get form values
  const age = parseInt(document.getElementById('age').value);
  const gender = document.getElementById('gender').value;
  const maritalStatus = document.getElementById('maritalStatus').value;
  const vehicleYear = parseInt(document.getElementById('vehicleYear').value);
  const creditScore = document.getElementById('creditScore').value;
  const drivingRecord = document.getElementById('drivingRecord').value;
  
  // Base premium calculation
  let basePremium = 1200; // National average
  
  // Age factor
  if (age < 25) basePremium *= 1.8;
  else if (age < 30) basePremium *= 1.3;
  else if (age < 65) basePremium *= 1.0;
  else basePremium *= 1.1;
  
  // Gender factor
  if (gender === 'male' && age < 25) basePremium *= 1.2;
  
  // Marital status factor
  if (maritalStatus === 'married') basePremium *= 0.9;
  
  // Vehicle age factor
  const vehicleAge = 2025 - vehicleYear;
  if (vehicleAge > 10) basePremium *= 0.8;
  else if (vehicleAge < 3) basePremium *= 1.2;
  
  // Credit score factor
  const creditMultipliers = {
    'excellent': 0.8,
    'good': 0.9,
    'fair': 1.1,
    'poor': 1.4
  };
  basePremium *= creditMultipliers[creditScore] || 1.0;
  
  // Driving record factor
  const recordMultipliers = {
    'clean': 1.0,
    'minor': 1.3,
    'major': 1.8,
    'dui': 2.5
  };
  basePremium *= recordMultipliers[drivingRecord] || 1.0;
  
  // Display results
  const finalPremium = Math.round(basePremium);
  document.getElementById('premiumEstimate').textContent = '$' + finalPremium.toLocaleString();
  
  // Show factors
  const factors = [];
  if (age < 25) factors.push('Young driver surcharge applied');
  if (maritalStatus === 'married') factors.push('Married discount applied');
  if (creditScore === 'excellent') factors.push('Excellent credit discount');
  if (drivingRecord !== 'clean') factors.push('Driving record violations increase premium');
  
  const factorsList = document.getElementById('rateFactors');
  factorsList.innerHTML = factors.map(factor => `<li>${factor}</li>`).join('');
  
  document.getElementById('calculatorResults').classList.remove('hidden');
  
  // Track calculator usage (if analytics available)
  if (typeof insuranceAnalytics !== 'undefined') {
    insuranceAnalytics.trackInsuranceEvent('calculator_use', 'tool_usage', 'auto_insurance_calculator', finalPremium);
  }
});
</script>