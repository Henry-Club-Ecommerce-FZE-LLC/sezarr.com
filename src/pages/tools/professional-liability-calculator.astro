---
import BaseLayout from '../../layouts/BaseLayout.astro';
import JsonLdScript from '../../components/JsonLdScript.astro';

const jsonLdData = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Professional Liability Calculator",
  "description": "Calculate professional liability insurance costs for your business. Get instant quotes based on your industry, revenue, and coverage needs.",
  "applicationCategory": "FinanceApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "provider": {
    "@type": "Organization",
    "name": "Sezarr Insurance Guide"
  }
};
---

<BaseLayout
  title="Professional Liability Calculator | Errors & Omissions Insurance Quotes"
  description="Calculate professional liability insurance costs instantly. Get personalized E&O quotes based on your profession, revenue, and coverage limits. Free calculator."
  canonical="https://sezarr.com/tools/professional-liability-calculator/"
>
  <JsonLdScript data={jsonLdData} />
  
  <div class="max-w-4xl mx-auto px-6 py-12">
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-gray-100 mb-6">
        Professional Liability Calculator
      </h1>
      <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
        Calculate estimated professional liability (E&O) insurance costs based on your profession, revenue, and coverage needs.
      </p>
    </div>

    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-12">
      <div class="grid md:grid-cols-2 gap-8">
        <div>
          <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-6">Professional Information</h2>
          
          <div class="space-y-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Profession/Industry
              </label>
              <select id="profession" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100">
                <option value="consultant">Consultant</option>
                <option value="accountant">Accountant</option>
                <option value="lawyer">Attorney/Lawyer</option>
                <option value="architect">Architect</option>
                <option value="engineer">Engineer</option>
                <option value="realtor">Real Estate Agent</option>
                <option value="financial">Financial Advisor</option>
                <option value="healthcare">Healthcare Professional</option>
                <option value="it">IT Professional</option>
                <option value="marketing">Marketing/Advertising</option>
              </select>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Years in Business
              </label>
              <select id="experience" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100">
                <option value="1">Less than 1 year</option>
                <option value="2">1-2 years</option>
                <option value="5">3-5 years</option>
                <option value="10">6-10 years</option>
                <option value="15">Over 10 years</option>
              </select>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Annual Revenue ($)
              </label>
              <input 
                type="number" 
                id="annualRevenue" 
                min="10000" 
                value="150000"
                class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100"
              />
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Coverage Limit
              </label>
              <select id="coverageLimit" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100">
                <option value="250000">$250,000</option>
                <option value="500000">$500,000</option>
                <option value="1000000">$1,000,000</option>
                <option value="2000000">$2,000,000</option>
                <option value="5000000">$5,000,000</option>
              </select>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                Deductible
              </label>
              <select id="deductible" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100">
                <option value="0">$0</option>
                <option value="1000">$1,000</option>
                <option value="2500">$2,500</option>
                <option value="5000">$5,000</option>
                <option value="10000">$10,000</option>
              </select>
            </div>

            <button 
              onclick="calculateProfessionalLiability()" 
              class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
            >
              Calculate Premium
            </button>
          </div>
        </div>

        <div id="results" class="bg-gray-50 dark:bg-gray-900 rounded-xl p-6" style="display: none;">
          <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Estimated Premium</h3>
          <div id="resultsContent"></div>
        </div>
      </div>
    </div>

    <!-- Information Section -->
    <div class="grid md:grid-cols-2 gap-8">
      <div class="bg-white dark:bg-gray-800 rounded-xl p-6">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">What's Covered</h3>
        <ul class="space-y-2 text-gray-600 dark:text-gray-400">
          <li class="flex items-start">
            <span class="text-green-600 mr-2">✓</span>
            Professional mistakes and errors
          </li>
          <li class="flex items-start">
            <span class="text-green-600 mr-2">✓</span>
            Failure to deliver services
          </li>
          <li class="flex items-start">
            <span class="text-green-600 mr-2">✓</span>
            Legal defense costs
          </li>
          <li class="flex items-start">
            <span class="text-green-600 mr-2">✓</span>
            Client financial losses
          </li>
        </ul>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-xl p-6">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">Premium Factors</h3>
        <ul class="space-y-2 text-gray-600 dark:text-gray-400">
          <li class="flex items-start">
            <span class="text-blue-600 mr-2">•</span>
            Industry risk level
          </li>
          <li class="flex items-start">
            <span class="text-blue-600 mr-2">•</span>
            Annual revenue/exposure
          </li>
          <li class="flex items-start">
            <span class="text-blue-600 mr-2">•</span>
            Coverage limits selected
          </li>
          <li class="flex items-start">
            <span class="text-blue-600 mr-2">•</span>
            Years of experience
          </li>
        </ul>
      </div>
    </div>
  </div>

  <script is:inline>
    function calculateProfessionalLiability() {
      const profession = document.getElementById('profession').value;
      const experience = parseInt(document.getElementById('experience').value);
      const annualRevenue = parseFloat(document.getElementById('annualRevenue').value);
      const coverageLimit = parseInt(document.getElementById('coverageLimit').value);
      const deductible = parseInt(document.getElementById('deductible').value);

      // Base rates by profession (as percentage of revenue)
      const professionRates = {
        'consultant': 0.008,
        'accountant': 0.012,
        'lawyer': 0.025,
        'architect': 0.018,
        'engineer': 0.015,
        'realtor': 0.006,
        'financial': 0.020,
        'healthcare': 0.030,
        'it': 0.010,
        'marketing': 0.012
      };

      // Experience multipliers
      const experienceMultipliers = {
        1: 1.5,
        2: 1.3,
        5: 1.0,
        10: 0.9,
        15: 0.8
      };

      // Coverage limit multipliers
      const coverageMultipliers = {
        250000: 0.7,
        500000: 0.85,
        1000000: 1.0,
        2000000: 1.4,
        5000000: 2.2
      };

      // Deductible discounts
      const deductibleDiscounts = {
        0: 1.0,
        1000: 0.92,
        2500: 0.88,
        5000: 0.82,
        10000: 0.75
      };

      const baseRate = professionRates[profession] || 0.012;
      const experienceMultiplier = experienceMultipliers[experience] || 1.0;
      const coverageMultiplier = coverageMultipliers[coverageLimit] || 1.0;
      const deductibleDiscount = deductibleDiscounts[deductible] || 1.0;
      
      let basePremium = annualRevenue * baseRate;
      let estimatedPremium = basePremium * experienceMultiplier * coverageMultiplier * deductibleDiscount;
      
      // Minimum premium
      estimatedPremium = Math.max(estimatedPremium, 500);
      
      const monthlyPremium = estimatedPremium / 12;

      document.getElementById('results').style.display = 'block';
      document.getElementById('resultsContent').innerHTML = `
        <div class="space-y-4">
          <div class="bg-blue-50 dark:bg-blue-900/30 rounded-lg p-4">
            <div class="text-3xl font-bold text-blue-600 dark:text-blue-400">$${estimatedPremium.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0})}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Annual Premium</div>
          </div>
          <div class="text-lg font-semibold text-gray-700 dark:text-gray-300">
            $${monthlyPremium.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0})}/month
          </div>
          <div class="text-sm text-gray-500 dark:text-gray-400 border-t pt-3">
            <p><strong>Coverage:</strong> $${coverageLimit.toLocaleString()}</p>
            <p><strong>Deductible:</strong> $${deductible.toLocaleString()}</p>
            <p><strong>Profession:</strong> ${profession.charAt(0).toUpperCase() + profession.slice(1)}</p>
            <p class="mt-2 text-xs">*Estimate only. Actual rates depend on specific risk factors, claims history, and insurer underwriting.</p>
          </div>
        </div>
      `;
    }

    // Calculate on page load
    document.addEventListener('DOMContentLoaded', calculateProfessionalLiability);
  </script>
</BaseLayout>