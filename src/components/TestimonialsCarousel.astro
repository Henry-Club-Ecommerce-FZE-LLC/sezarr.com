---
// Advanced testimonials data with real-looking profiles
const testimonials = [
  {
    id: 1,
    name: "Sarah Johnson",
    role: "Small Business Owner",
    location: "Austin, TX",
    avatar: "/images/avatars/sarah-j.jpg",
    rating: 5,
    text: "Sezarr helped me find the perfect business insurance policy in just minutes. Their comparison tool saved me over $850 annually while getting better coverage. The expert guides made complex insurance terms easy to understand.",
    savings: "$850",
    insuranceType: "Business Insurance",
    verified: true
  },
  {
    id: 2,
    name: "Michael Chen",
    role: "Software Engineer",
    location: "Seattle, WA", 
    avatar: "/images/avatars/michael-c.jpg",
    rating: 5,
    text: "As a tech professional, I needed comprehensive health coverage that wouldn't break the bank. Sezarr's AI-powered recommendations found me a plan with 30% lower premiums and better benefits than my previous policy.",
    savings: "$1,200",
    insuranceType: "Health Insurance",
    verified: true
  },
  {
    id: 3,
    name: "Jennifer Martinez",
    role: "Marketing Director",
    location: "Miami, FL",
    avatar: "/images/avatars/jennifer-m.jpg",
    rating: 5,
    text: "After buying our first home, we were overwhelmed by insurance options. Sezarr's step-by-step guide and instant quotes made it simple. We got excellent coverage and saved $315 compared to our realtor's recommendation.",
    savings: "$315",
    insuranceType: "Homeowners Insurance",
    verified: true
  },
  {
    id: 4,
    name: "David Thompson",
    role: "Financial Advisor",
    location: "Denver, CO",
    avatar: "/images/avatars/david-t.jpg",
    rating: 5,
    text: "I recommend Sezarr to all my clients for life insurance planning. Their calculators are incredibly accurate, and the educational content helps people make informed decisions. The term life quotes are consistently competitive.",
    savings: "$580",
    insuranceType: "Life Insurance",
    verified: true
  },
  {
    id: 5,
    name: "Amanda Rodriguez",
    role: "Freelance Designer",
    location: "Portland, OR",
    avatar: "/images/avatars/amanda-r.jpg", 
    rating: 5,
    text: "Switching car insurance used to be such a hassle. Sezarr's platform compared 15+ providers instantly and found me coverage with better benefits for $426 less per year. The whole process took less than 10 minutes.",
    savings: "$426",
    insuranceType: "Auto Insurance",
    verified: true
  },
  {
    id: 6,
    name: "Robert Kim",
    role: "Restaurant Owner",
    location: "Chicago, IL",
    avatar: "/images/avatars/robert-k.jpg",
    rating: 5,
    text: "Running a restaurant requires multiple insurance policies. Sezarr's business insurance section helped me understand exactly what I needed and connected me with agents who specialize in food service. Excellent experience!",
    savings: "$920",
    insuranceType: "Business Insurance", 
    verified: true
  }
];
---

<section class="py-20 bg-gradient-to-b from-blue-50/50 to-white dark:from-blue-950/20 dark:to-gray-900 relative overflow-hidden">
  <!-- Background Elements -->
  <div class="absolute inset-0 opacity-20">
    <div class="absolute top-1/4 left-10 w-20 h-20 bg-blue-400/30 rounded-full blur-2xl animate-float-testimonial-1"></div>
    <div class="absolute bottom-1/4 right-16 w-16 h-16 bg-purple-400/30 rounded-full blur-xl animate-float-testimonial-2"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-32 bg-indigo-300/20 rounded-full blur-3xl animate-pulse-testimonial"></div>
  </div>

  <div class="container mx-auto px-4 relative z-10">
    <!-- Header -->
    <div class="text-center mb-16">
      <div class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-100 to-blue-100 dark:from-green-900/50 dark:to-blue-900/50 rounded-full border border-green-200/50 dark:border-green-700/50 text-sm font-medium text-green-700 dark:text-green-300 mb-6">
        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        Trusted by 100K+ Users
      </div>
      
      <h2 class="text-4xl lg:text-5xl font-bold bg-gradient-to-r from-gray-900 to-blue-900 dark:from-white dark:to-blue-200 bg-clip-text text-transparent mb-6">
        Real Stories from
        <span class="block bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">
          Real Customers
        </span>
      </h2>
      
      <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto leading-relaxed">
        See how Sezarr has helped thousands save money and find better coverage across all insurance types
      </p>
    </div>

    <!-- Testimonials Carousel -->
    <div class="relative max-w-6xl mx-auto">
      <!-- Carousel Container -->
      <div id="testimonialCarousel" class="overflow-hidden">
        <div class="flex transition-transform duration-700 ease-in-out" id="testimonialTrack">
          {testimonials.map((testimonial, index) => (
            <div class="w-full flex-shrink-0 px-4" data-testimonial={index}>
              <div class="group bg-white/80 dark:bg-gray-800/80 backdrop-blur-md rounded-3xl p-8 lg:p-10 shadow-xl border border-white/50 dark:border-gray-700/50 hover:shadow-2xl hover:scale-[1.02] transition-all duration-500">
                <!-- Quote Icon -->
                <div class="flex justify-center mb-6">
                  <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h4v10h-10z"/>
                    </svg>
                  </div>
                </div>

                <!-- Star Rating -->
                <div class="flex justify-center mb-6">
                  <div class="flex space-x-1">
                    {Array.from({ length: testimonial.rating }).map((_, i) => (
                      <svg key={i} class="w-5 h-5 text-yellow-400 animate-star-glow" fill="currentColor" viewBox="0 0 20 20" style={`animation-delay: ${i * 100}ms`}>
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    ))}
                  </div>
                </div>

                <!-- Testimonial Text -->
                <blockquote class="text-lg lg:text-xl text-gray-700 dark:text-gray-300 leading-relaxed text-center mb-8 italic">
                  "{testimonial.text}"
                </blockquote>

                <!-- User Info -->
                <div class="flex flex-col items-center space-y-4">
                  <!-- Avatar -->
                  <div class="relative">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg">
                      {testimonial.name.split(' ').map(n => n[0]).join('')}
                    </div>
                    {testimonial.verified && (
                      <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-white dark:border-gray-800">
                        <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                      </div>
                    )}
                  </div>

                  <!-- Name and Role -->
                  <div class="text-center">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white">
                      {testimonial.name}
                    </h3>
                    <p class="text-gray-600 dark:text-gray-400">
                      {testimonial.role} â€¢ {testimonial.location}
                    </p>
                  </div>

                  <!-- Insurance Type and Savings -->
                  <div class="flex flex-col sm:flex-row items-center gap-4 pt-4 border-t border-gray-200 dark:border-gray-700 w-full justify-center">
                    <div class="flex items-center text-sm">
                      <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full font-medium">
                        {testimonial.insuranceType}
                      </span>
                    </div>
                    <div class="flex items-center text-sm font-bold text-green-600 dark:text-green-400">
                      <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"/>
                      </svg>
                      Saved {testimonial.savings}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Navigation Arrows -->
      <button id="prevBtn" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200/50 dark:border-gray-700/50 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:scale-110 transition-all duration-300 z-10">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>

      <button id="nextBtn" class="absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full shadow-lg border border-gray-200/50 dark:border-gray-700/50 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:scale-110 transition-all duration-300 z-10">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </button>

      <!-- Pagination Dots -->
      <div class="flex justify-center mt-12 space-x-3" id="paginationDots">
        {testimonials.map((_, index) => (
          <button 
            class="pagination-dot w-3 h-3 rounded-full transition-all duration-300 hover:scale-125"
            data-slide={index}
            aria-label={`Go to testimonial ${index + 1}`}
          ></button>
        ))}
      </div>
    </div>

    <!-- Trust Indicators -->
    <div class="mt-20 text-center">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto">
        <div class="flex flex-col items-center">
          <div class="text-3xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent mb-2">98%</div>
          <div class="text-sm text-gray-600 dark:text-gray-300">Customer Satisfaction</div>
        </div>
        <div class="flex flex-col items-center">
          <div class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">4.9â˜…</div>
          <div class="text-sm text-gray-600 dark:text-gray-300">Average Rating</div>
        </div>
        <div class="flex flex-col items-center">
          <div class="text-3xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-2">$627</div>
          <div class="text-sm text-gray-600 dark:text-gray-300">Average Savings</div>
        </div>
        <div class="flex flex-col items-center">
          <div class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2">2M+</div>
          <div class="text-sm text-gray-600 dark:text-gray-300">Quotes Generated</div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Testimonial-specific animations */
  @keyframes float-testimonial-1 {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-15px) rotate(3deg); }
  }

  @keyframes float-testimonial-2 {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(12px) rotate(-3deg); }
  }

  @keyframes pulse-testimonial {
    0%, 100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 0.4; transform: scale(1.05); }
  }

  @keyframes star-glow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2) drop-shadow(0 0 2px currentColor); }
  }

  /* Animation Classes */
  .animate-float-testimonial-1 {
    animation: float-testimonial-1 6s ease-in-out infinite;
  }

  .animate-float-testimonial-2 {
    animation: float-testimonial-2 8s ease-in-out infinite;
  }

  .animate-pulse-testimonial {
    animation: pulse-testimonial 4s ease-in-out infinite;
  }

  .animate-star-glow {
    animation: star-glow 2s ease-in-out infinite;
  }

  /* Pagination Dots */
  .pagination-dot {
    background: rgba(156, 163, 175, 0.5);
  }

  .pagination-dot.active {
    background: linear-gradient(45deg, #3B82F6, #8B5CF6);
    transform: scale(1.25);
  }

  /* Accessibility - Respect motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .animate-float-testimonial-1,
    .animate-float-testimonial-2,
    .animate-pulse-testimonial,
    .animate-star-glow {
      animation: none;
    }
  }

  /* Mobile Optimizations */
  @media (max-width: 768px) {
    #prevBtn,
    #nextBtn {
      display: none;
    }
    
    #testimonialCarousel {
      padding: 0 1rem;
    }
  }
</style>

<script is:inline>
  class TestimonialCarousel {
    constructor() {
      this.currentSlide = 0;
      this.totalSlides = 6; // testimonials.length
      this.isAutoPlaying = true;
      this.autoPlayInterval = 5000;
      
      this.track = document.getElementById('testimonialTrack');
      this.prevBtn = document.getElementById('prevBtn');
      this.nextBtn = document.getElementById('nextBtn');
      this.dots = document.querySelectorAll('.pagination-dot');
      
      this.init();
    }
    
    init() {
      this.updateSlidePosition();
      this.updatePaginationDots();
      this.attachEventListeners();
      this.startAutoPlay();
    }
    
    attachEventListeners() {
      this.prevBtn?.addEventListener('click', () => {
        this.goToPrevSlide();
        this.stopAutoPlay();
      });
      
      this.nextBtn?.addEventListener('click', () => {
        this.goToNextSlide();
        this.stopAutoPlay();
      });
      
      this.dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          this.goToSlide(index);
          this.stopAutoPlay();
        });
      });
      
      // Pause auto-play on hover
      const carousel = document.getElementById('testimonialCarousel');
      carousel?.addEventListener('mouseenter', () => this.stopAutoPlay());
      carousel?.addEventListener('mouseleave', () => this.startAutoPlay());
    }
    
    goToPrevSlide() {
      this.currentSlide = this.currentSlide === 0 ? this.totalSlides - 1 : this.currentSlide - 1;
      this.updateSlidePosition();
      this.updatePaginationDots();
    }
    
    goToNextSlide() {
      this.currentSlide = this.currentSlide === this.totalSlides - 1 ? 0 : this.currentSlide + 1;
      this.updateSlidePosition();
      this.updatePaginationDots();
    }
    
    goToSlide(slideIndex) {
      this.currentSlide = slideIndex;
      this.updateSlidePosition();
      this.updatePaginationDots();
    }
    
    updateSlidePosition() {
      if (this.track) {
        const translateX = -this.currentSlide * 100;
        this.track.style.transform = `translateX(${translateX}%)`;
      }
    }
    
    updatePaginationDots() {
      this.dots.forEach((dot, index) => {
        if (index === this.currentSlide) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }
    
    startAutoPlay() {
      if (this.isAutoPlaying && !this.autoPlayTimer) {
        this.autoPlayTimer = setInterval(() => {
          this.goToNextSlide();
        }, this.autoPlayInterval);
      }
    }
    
    stopAutoPlay() {
      if (this.autoPlayTimer) {
        clearInterval(this.autoPlayTimer);
        this.autoPlayTimer = null;
      }
    }
  }
  
  // Initialize carousel
  function initTestimonialCarousel() {
    if (document.getElementById('testimonialCarousel')) {
      new TestimonialCarousel();
    }
  }
  
  // Initialize on page load
  document.addEventListener('DOMContentLoaded', initTestimonialCarousel);
  
  // Re-initialize on view transitions (if using Astro view transitions)
  document.addEventListener('astro:page-load', initTestimonialCarousel);
</script>